"Weiss" the one of Network Game Transfer Protocol - Server
----------------------------------------------------------
　|　readmeは隅々まで読みまさいたまさいたまさいたまー！
　＼＿＿＿＿＿　 ＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿／
　　　／||ミ　 Ｖ
　　／::||
　／::::||＿＿＿＿__
　|:::::||　　　　  ||
　|:::::||│　／　　||
　|:::::||￣＼　   ｶﾞﾁｬｯ
　|:::::|| ∀ﾟ）―　||
　|:::::||＿／ 　　 ||
　|:::::||│　＼ 　 ||
　|:::::||∧ ∧∩   ||
　|:::::|| ﾟ∀ﾟ)/   ||
　|:::::||∧ ∧∩   ||
　|:::::|| ﾟ∀ﾟ)/   ||
　|:::::||　  〈　  ||
　|:::::|| ／＼」   ||
　＼::::||￣￣￣￣￣
　　＼::||
　　　＼||
データファイルを置く位置が変わってます。更新履歴参照。
(iniとchara,playerはそのまま)



＜はじめに＞
エミュレータに関する法律関連についてはどこかに明文化されてるわけでもないので、
よく分からない人も多いのではないかと思います。
というか、私もよく知りません・・・

ただ、現状でいえることは・・・
・エミュ鯖開発者および利用者は、それを理由に垢BANされても規約違反なので文句は言えない
・Gung-Ho会員でない状態でも、エミュ鯖の使用によって本鯖の運営に影響を与える
　（例えば公開エミュ鯖は本鯖のユーザー数を減らす）行為を行った場合、
　法的手段に訴えられる可能性が十二分にある
　（ガンホーの管理体制はこの場合問題にならないと思われヽ(`Д´)ノ）
・Weissのコード自体については、白か黒か微妙。
　よって、それを利用したことにより法的に問題が発生する可能性もゼロとはいえない。
どこにも有利な要素はないので、例えばエミュ鯖使ってます、とか、
運営してます、というようなことを公にすると死にますと言うことで。
ヤバいと思われた方は、速やかに全てのファイルを削除してください。

また、以下の点を守っていただきますようよろしくお願いします。

・不特定(取扱者が相手の素性を把握できない)または多数人に対して
　情報を提供するサイトでの紹介、配布はご遠慮下さい。
・営利目的を有するサイトでの紹介、配布はご遠慮下さい。
・紙媒体での紹介、配布はご遠慮下さい。





＜謝辞＞
このソフトは、
・EmuServer of Ragnarok
・Athena Project
・WEISS研究会BBS（暫定版
の諸氏による資料や情報を元に制作されています。
特に、eorの0002.txtのパケット資料、
0052.lzhおよびAthenaのソースコードなしにはWeissは制作できませんでした。
また、WEISS研究会BBSの諸氏によって、
多くの情報提供や、データ、コードそしてNPCスクリプトの作成が行われています。

この場を借りて、厚くお礼申し上げます。





＜ライセンス＞
WeissはGPLライセンスとし、ソースコードのみを頒布します。
再頒布の際は、バイナリのみの配布はGPL違反ですので
必ずソースも添付してください。また、第三者への配布は可能な限り
ソースのみの配布にとどめていただければと思います。
GPLライセンスについては同梱のLICENCE、LICENCE_JAをご参照ください。





＜履歴＞
※現在はまだα版(基礎開発中)の為、各種データファイルは随時更新を行っています。

[α0x0013] ・スキル使用時のダメージ計算の不具合修正
           ・二刀流逆手ダメージの属性修正の不具合を修正
           ・[script]viewpointコマンドが範囲エラーで全く使えない不具合を修正
           ・重量オーバーや矢がないときでも自動鷹が発動する問題を修正
[α0x0012] ・α0x0011でポータルメモが消えてしまう不具合を修正
           ・gatファイル配置フォルダを、"data"から"map"に変更
           ・*_db.txt配置フォルダを、"database"に変更
           ・shop.txt,warp.txt,script.txt,mob.txtを複数読み込めるようにした
           ・上記ファイルの配置フォルダを"script"以下の任意位置
           　(サブフォルダ含む)に変更。拡張子".txt"の全ファイル読み込み
           ・[script]set,checkコマンドで変数Jobを操作できるようにした
           ・[script]スクリプトラベル実装(複数NPCで共通スクリプト)
           ・[script]ジョブ変更、ポイント表示コマンド実装
[α0x0011] ・ループ処理を変更し、CPU負荷が100%にならないようにした
           ・[script]setコマンドもcheckコマンドと同様に式の形式で書けるように
           ・[script]フラグ実装(readme_s.txt参照のこと)
           ・SW発動時のキャラのモーションが抜けていたのを修正
[α0x0010] ・MVPアイテムが最後にボスを攻撃した人に渡されてしまう不具合を修正
           ・カタール装備時クリティカル2倍効果がカード効果にかからないのを修正
           ・矢の属性が反映されず、弓の属性が反映されることがあるのを修正
           ・[script]checkコマンドで<=、>=、<>を使うとエラーになる不具合修正
           ・[script]healコマンドでHP/SPがクライアントに反映されないのを修正
           ・[script]読み込み処理改良
[α0x000f] ・2次職スキル：ピアース、右手修練、左手修練、ソニックブロー実装
           ・アサシン二刀流実装
           ・複数の敵に囲まれたときの回避率減少を実装
           ・BaseLvが100まであがってしまう不具合を修正
           ・NPCスクリプト実装(readme_s.txt参照のこと)
           ・カプラ倉庫実装
           ・player.txtの仕様変更(手動書き換えは不要)





＜ToDo、未実装項目、既知の不具合＞
・複数の敵に囲まれたときの回避率低下
・ワープ、ショップ以外のNPCがいない
・NPCスクリプトで、NPCのスキル使用エフェクトを使えるように
・弓攻撃で、間に障害物を挟む場合の処理
・1次職の一部のスキル
・2次職の一部のスキル
・スキル詠唱エフェクトの色
・ペコ、カート
・チャット
・パーティー
・ギルド
・モンスターのAI（ルート、リンク、詠唱反応、範囲攻撃）
他、いろいろ・・・





＜現在の状況＞
スキルの一部やPT、ギルドとかは未実装。
大幅な機能追加が続いているので、不具合だらけかもしれません。
報告とかよろしくお願いします。
あと、モンスターやアイテムのデータベースが一部欠けてます。
情報が欠けているアイテムやモンスターを使用/表示させると、
多分エラーが出ます。データベースの補完に関する情報募集中。
あと、なんか攻撃とアイテムドロップのタイミングがおかしいですが仕様です(´-｀)





＜使用方法＞
まず、dataフォルダの中に、
data.grfから吸い出した*.gatファイルをありったけ入れてください。

（警告：*.gatがないと、起動しません！！）

次に、一回Weissを起動して終了するとWeiss.iniが作成されるので、
Weiss.iniを開いて設定を適当にいじってください。
それがすんだら、HookConnectを使って接続（ConnectTo=127.0.0.1）。
ID:test PASS:test または ID:test2 PASS:test でログイン。

それではごゆっくりお楽しんでください。





＜Weiss.iniファイルの設定＞
・IP=127.0.0.1
Weissを動かすマシンのIPを指定してください。
外とつなぐ場合はPublic IPで。

・Name=emuserver
サーバーの名前です。適当に。

・NPCID=50000
NPCのIDを何番から振るかです。特にいじる必要はありません。

・sv2port=6121
・sv3port=5121
それぞれキャラセレ、ゲームのポートです。
ログインのポート(6900)と併せて、各々が重ならないように指定してください。
普通はそのままでOKです。

・WarpDebug=0
これを1にすると、ワープポイントがポリンになります。
カーソルを合わせるとワープポイントの名前が出るので、
デバッグに使えます。

・BaseExpMultiplier=1
・JobExpMultiplier=1
それぞれ、ベース経験値とジョブ経験値の補正です。
たとえば2にすると、入る経験値が2倍になります。
増やしすぎても、3万か6万くらいでオーバーフローしてあまり意味がないかも。

・DisableMonsterActive=0
これを1にすると、アクティブモンスターが非アクティブになります。

・AutoStart=0
これを1にすると、データロード後に自動でサーバーをスタートします。

・DisableLevelLimit=0
これを1にすると、BaseLV/JobLVが上限を超えても経験値が入るようになります。

・EnableMonsterKnockBack=0
これを1にすると、モンスターが攻撃を受けたとき一定時間移動不能になります。
本鯖では、0が仕様です。

・DisableEquipLimit=0
これを1にすると、職業、レベル、性別に関係なく装備ができるようになります。

・ItemDropType=0
この数字が0の時、ドロップ率計算はmob_dbの数字でのX/10000で行われます。
1の時は、本鯖の仕様に合わせ、mob_dbの数字での(X+1)/10000で行われます。
本鯖とアイテムドロップ率を合わせたい場合は1にしてください。

・ItemDropDenominator=10000
この数字を変更すると、上記計算での分母10000を指定の値に変更できます。
数字を大きくするほどドロップ率が下がり、小さくするほどドロップ率が上がります。

・ItemDropPer=10000
この数字を増やすとアイテムドロップ率が滅茶苦茶上がります。
数字は万分率で、カードのドロップ率(1/10000)が基準です。
例えばこれを20000にするとカードのドロップ率は1/2に、
10001にすると1/5000、10010にすると1/1000、
10100にすると1/100、11000にすると1/10になります。
通常は10000にごく近い値に設定するだけでいいかと思います。





＜デバッグコマンド＞
先頭に「#」をつけてしゃべるとデバッグコマンドが実行できます。
コマンドは全て半角で（漢字を切って）入力してください。

#save
現在位置をセーブする。

#return
セーブした位置に戻る。

#warp [Map Name],[X],[Y]
指定したマップにワープする。
マップ名は、「prontera」「pay_dun00」などとし、拡張子は書かない。
間違ったマップ名をしてーしてエラー落ちした場合は、
再ログインすれば元のマップにいるはずです（多分）
壁などにはまった場合は、このコマンドを使って移動すれば抜け出せます。

#speed [Speed]
キャラの移動速度を変更する。数字が小さいほど早い。数字は50〜1000まで有効。

#job [JobType]
キャラの職業を変更する。JobTypeは0から12までの半角数字。

#ccolor [Color]
キャラの服の色を変更する。Colorは0から4間での半角数字。

#die
自殺。

#item [Item ID],[Amount]
Item IDで指定されるアイテムをAmount個作成する。
Item IDと実際のアイテムの対応に関してはitem_db.txtを見てください。
(注:0106.zipのみ)装備は１つづつ作ること。

#alive
HP/SP全快で生き返る。

#option [Option Flag]
見た目だけの変更を行います。
[Option Flag]=sight　・・・サイト状態
[Option Flag]=cart　・・・カート装着
[Option Flag]=falcon　・・・鷹を連れる
[Option Flag]=peko　・・・ぺこぺこに乗る(騎士のみ)
[Option Flag]=off　・・・オプション全解除

#refine [val]
装備中の武器防具全てを、+[val]精錬状態にします。
アイテムの+表示は更新されないので、リログしてください。
